{"ast":null,"code":"var _jsxFileName = \"/Users/AaronVerdine/Desktop/WEB_DEV/Projects/fso_blog/Client/src/utils/authcheck.js\";\nimport React, { useEffect, useContext, Profiler } from \"react\";\nimport history from \"./history\";\nimport Context from \"./context\";\nimport * as ACTIONS from \"../store/actions/actions\";\nimport axios from \"axios\"; // Utilize useEffect to update authentication state\n\nconst AuthCheck = () => {\n  const context = useContext(Context);\n  useEffect(() => {\n    if (context.authObj.isAuthenticated()) {\n      // Checkes if access tokens in local storage haven't expired and user is still logged in\n      const profile = context.authObj.userProfile;\n      context.handleUserLogin();\n      context.handleUserAddProfile(profile);\n      axios.post(\"/api/posts/userprofiletodb\", profile).then(axios.get(\"/api/get/userprofilefromdb\", {\n        params: {\n          email: Profiler.profile.email\n        }\n      })).then(res => context.handleAddDBProfile(res.data)).then(history.replace(\"/\"));\n    } else {\n      context.handleUserLogout();\n      context.handleUserRemoveProfile();\n      history.replace(\"/\");\n    }\n  }, [context.authObj.userProfile, context]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 10\n    }\n  });\n};\n\nexport default AuthCheck;","map":{"version":3,"sources":["/Users/AaronVerdine/Desktop/WEB_DEV/Projects/fso_blog/Client/src/utils/authcheck.js"],"names":["React","useEffect","useContext","Profiler","history","Context","ACTIONS","axios","AuthCheck","context","authObj","isAuthenticated","profile","userProfile","handleUserLogin","handleUserAddProfile","post","then","get","params","email","res","handleAddDBProfile","data","replace","handleUserLogout","handleUserRemoveProfile"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,UAA3B,EAAuCC,QAAvC,QAAuD,OAAvD;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAO,KAAKC,OAAZ,MAAyB,0BAAzB;AAEA,OAAOC,KAAP,MAAkB,OAAlB,C,CAEA;;AAEA,MAAMC,SAAS,GAAG,MAAM;AACtB,QAAMC,OAAO,GAAGP,UAAU,CAACG,OAAD,CAA1B;AAEAJ,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIQ,OAAO,CAACC,OAAR,CAAgBC,eAAhB,EAAJ,EAAuC;AACrC;AACA,YAAMC,OAAO,GAAGH,OAAO,CAACC,OAAR,CAAgBG,WAAhC;AACAJ,MAAAA,OAAO,CAACK,eAAR;AACAL,MAAAA,OAAO,CAACM,oBAAR,CAA6BH,OAA7B;AACAL,MAAAA,KAAK,CACFS,IADH,CACQ,4BADR,EACsCJ,OADtC,EAEGK,IAFH,CAGIV,KAAK,CAACW,GAAN,CAAU,4BAAV,EAAwC;AACtCC,QAAAA,MAAM,EAAE;AAAEC,UAAAA,KAAK,EAAEjB,QAAQ,CAACS,OAAT,CAAiBQ;AAA1B;AAD8B,OAAxC,CAHJ,EAOGH,IAPH,CAOSI,GAAD,IAASZ,OAAO,CAACa,kBAAR,CAA2BD,GAAG,CAACE,IAA/B,CAPjB,EAQGN,IARH,CAQQb,OAAO,CAACoB,OAAR,CAAgB,GAAhB,CARR;AASD,KAdD,MAcO;AACLf,MAAAA,OAAO,CAACgB,gBAAR;AACAhB,MAAAA,OAAO,CAACiB,uBAAR;AACAtB,MAAAA,OAAO,CAACoB,OAAR,CAAgB,GAAhB;AACD;AACF,GApBQ,EAoBN,CAACf,OAAO,CAACC,OAAR,CAAgBG,WAAjB,EAA8BJ,OAA9B,CApBM,CAAT;AAsBA,sBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP;AACD,CA1BD;;AA4BA,eAAeD,SAAf","sourcesContent":["import React, { useEffect, useContext, Profiler } from \"react\";\nimport history from \"./history\";\nimport Context from \"./context\";\nimport * as ACTIONS from \"../store/actions/actions\";\n\nimport axios from \"axios\";\n\n// Utilize useEffect to update authentication state\n\nconst AuthCheck = () => {\n  const context = useContext(Context);\n\n  useEffect(() => {\n    if (context.authObj.isAuthenticated()) {\n      // Checkes if access tokens in local storage haven't expired and user is still logged in\n      const profile = context.authObj.userProfile;\n      context.handleUserLogin();\n      context.handleUserAddProfile(profile);\n      axios\n        .post(\"/api/posts/userprofiletodb\", profile)\n        .then(\n          axios.get(\"/api/get/userprofilefromdb\", {\n            params: { email: Profiler.profile.email },\n          })\n        )\n        .then((res) => context.handleAddDBProfile(res.data))\n        .then(history.replace(\"/\"));\n    } else {\n      context.handleUserLogout();\n      context.handleUserRemoveProfile();\n      history.replace(\"/\");\n    }\n  }, [context.authObj.userProfile, context]);\n\n  return <div></div>;\n};\n\nexport default AuthCheck;\n"]},"metadata":{},"sourceType":"module"}